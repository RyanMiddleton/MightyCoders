@page
@model Smart.Pages.ClassSchedule.IndexModel
@using Smart.Utility
@{
    ViewData["Title"] = "Class Schedule";
}
<h2>Class Schedule</h2>

@{
    var currentDay = 8;
}
<form method="get" asp-action="ClassSchedule/Index" id="TermForm">
    <select name="termId" id="TermId" asp-items="Model.Terms" class="form-control"></select>
</form>

<form method="post" asp-page-handler="ScheduleClass" id="addClassForm">
    @if (Model.Classes != null && Model.Classes.Count != 0)
    {
        <select name="classId" id="ClassId" asp-items="Model.Classes" class="form-control"></select>
    }

    @for (int i = 0; i < Model.ScheduleAvailabilities.Count; i++)
    {
        @if (currentDay != Model.ScheduleAvailabilities[i].DayOfWeek)
        {
            SD.EDayOfWeek DayOfWeek = (SD.EDayOfWeek)Model.ScheduleAvailabilities[i].DayOfWeek;
            currentDay = Model.ScheduleAvailabilities[i].DayOfWeek;
            <h5>@DayOfWeek</h5>
        }
        <div>
            @Html.DisplayFor(s => Model.ScheduleAvailabilities[i].StartTime) - @Html.DisplayFor(s => Model.ScheduleAvailabilities[i].EndTime)
            <input class="form-check-input" type="checkbox" asp-for="@Model.ScheduleAvailabilities[i].Selected" />
            <input hidden asp-for="@Model.ScheduleAvailabilities[i].ScheduleAvailabilityId" />
        </div>
    }
    <input class="btn btn-primary text-white" type="submit" value="Save" />
</form>

@section Scripts{ 
    <script>
        $(document).ready(function () {
            $('#TermId').change(function () {
                $('#TermForm').submit();
            });
        });
    </script>
}
